@page
@model Web0524.Pages.UserListModel
@using Web0524.Models
@{
    var myService = (IMyService)ViewContext.HttpContext.RequestServices.GetService(typeof(IMyService));
    var myData = myService.GetBaseData();
}
<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/css/Share.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美容工作室介紹</title>
    <style>
        .user-img{
            width:70px;
            height:70px;
            object-fit: cover;
            object-position: center;
        }
        .nav-tabs {
            display: flex;
            margin-bottom: 20px; /* Optional spacing */
        }

        .nav-item {
            margin-right: 20px; /* Adds space between tab buttons */
        }

        .table-borderless th{
            width:15ch;
        }

        .table-borderless td {
            width: 20ch;
        }
    </style>
    @if (TempData.ContainsKey("add_success"))
    {
        <script>
            setTimeout(function () {
                alert('會員已添加。');
            @(TempData.Remove("add_success"));
            }, 100);
        </script>
    }
    <script>
        function promptPassword() {
            var password = prompt("請輸入您的密碼：");
            if (password === "@Model.User_me.Password" && "@Model.User_me.Password" !== null) {
                // 密碼正確，執行後續處理
                return true;
            } else {
                // 密碼錯誤，提示錯誤訊息或執行其他操作
                alert("密碼錯誤，請重新輸入。");
                return false;
            }
        }
    </script>


    <script>
        function searchCards() {
            var keyword = document.getElementById("keywordInput").value.toLowerCase();
            var cardItems = document.querySelectorAll(".card-item");

            for (var i = 0; i < cardItems.length; i++) {
                var cardName = cardItems[i].getAttribute("data-search");
                var cardSearchContent = cardItems[i].querySelector(".search-content").innerText.toLowerCase();
                if (cardName.includes(keyword) || cardSearchContent.includes(keyword)) {
                    cardItems[i].style.display = "";
                } else {
                    cardItems[i].style.display = "none";
                }
            }
        }
    </script>

</head>
<body>

    <div class="container page-basetop">
        <header>
            <div class="animation-div">
                <h2 class="header_text heading break-all slideInRight">
                    @myData.Name 會員清單
                </h2>
            </div>
            <nav class="nav">
                <input id="keywordInput" class="nav-link" style="margin-right: 10px;" type="text" placeholder="輸入關鍵字">
                <button id="searchButton" class="nav-link fx-tobig" style="margin-right: 10px;" onclick="searchCards()">搜索</button>
            </nav>
            <br>
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button style="margin-right: 10px;color: var(--color3);" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" role="tab" aria-controls="profile-tab-pane" aria-selected="false" id="allusersTab" class="nav-link fx-tobig" data-tab="alluser1">所有會員</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button style="margin-right: 10px;color: var(--color3);" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" role="tab" aria-controls="profile-tab-pane" aria-selected="false" id="users1Tab" class="nav-link fx-tobig" data-tab="users1">優質會員排行</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button style="margin-right: 10px;color: var(--color3);" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" role="tab" aria-controls="profile-tab-pane" aria-selected="false" id="users2Tab" class="nav-link fx-tobig" data-tab="users2">惡意會員清單</button>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link fx-tobig" style="margin-right: 10px;color: var(--color3);" asp-page="UserAdd_m">
                        <i class="fas fa-user-plus icon-width"></i>
                        新增會員
                    </a>
                </li>

            </ul>
        </header>

        <br>



        <div class="row">
            <div class="col-md-12">
                <div id="allusersContent" class="content">
                    @foreach (var item in Model.Users)
                    {
                        <div class="col-md-12 mb-4 card-item" data-search="@item.Name?.ToLower()">
                            <div class="card" data-cardname="@item.Name?.ToLower()">
                                <div class="card-header" data-toggle="collapse" data-target="#collapse-@item.Id">
                                    <h5 class="card-title">

                                            @{
                                                string imageData = item.Photo != null ? Convert.ToBase64String(item.Photo) : null;
                                            }
                                            @if (string.IsNullOrEmpty(imageData))
                                            {
                                            <img class="user-img imagePreview_img" src="dist/img/user3-128x128.jpg" alt="圖片">
                                            }
                                            else
                                            {
                                            <img class="user-img imagePreview_img" src="data:image/jpeg;base64,@imageData" alt="圖片">
                                            }

                                            @if (item.UserType == "1")
                                            {
                                            <i class="fas fa-user-tie text-primary icon-width"></i>
                                            }
                                            else if (item.UserType == "2")
                                            {
                                                <i class="fas fa-user-shield text-success icon-width"></i>
                                            }
                                            else if (item.UserType == "3")
                                            {
                                                <i class="fas fa-user text-danger icon-width"></i>
                                            }
                                            <a> @item.Name ( @item.Id ) </a>
                                    </h5>
                                </div>
                                <div id="collapse-@item.Id" class="collapse">
                                    <div class="card-body">
                                        @{
                                            var UserPoint = Model.UserPointTB.FirstOrDefault(up => up.uid.ToString() == item.Id);
                                            DateTime birthday = Convert.ToDateTime(item.Birthday);
                                            string birthday_str = birthday.ToString("yyyy/MM/dd");
                                            string UserPointStr1 = "無評分";
                                            string UserPointStr2 = "無評分";
                                            foreach (Web0524.Models.UserPointStr userPointStr in Model.userPointStr)
                                            {
                                                if (UserPoint.point >= userPointStr.Rate_s && UserPoint.point < userPointStr.Rate_e)
                                                {
                                                    UserPointStr1 = userPointStr.Str1;
                                                    UserPointStr2 = userPointStr.Str2;
                                                }
                                            }
                                        }
                                        <div class="form-group alert alert-light alert-form-div" role="alert">
                                            <table style="width:100%;">
                                                <tr>
                                                    <th>
                                                        <label>帳戶權限:</label>
                                                    </th>
                                                    <td>
                                                        @if(item.UserType == "1")
                                                        {
                                                            <label><i class="fas fa-user-tie text-primary icon-width"></i>最高權限</label>
                                                        }
                                                        else if (item.UserType == "2")
                                                        {
                                                            <label><i class="fas fa-user-shield text-success icon-width"></i>管理員</label>
                                                        }
                                                        else if (item.UserType == "3")
                                                        {
                                                            <label><i class="fas fa-user text-danger icon-width"></i>一般會員</label>
                                                        }
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="form-group alert alert-light alert-form-div" role="alert">
                                            <table style="width:100%;">
                                                <tr>
                                                    <th>
                                                        <label><i class="fas fa-birthday-cake icon-width"></i>生日:</label>
                                                    </th>
                                                    <td>
                                                        <label>@birthday_str</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label><i class="fas fa-phone icon-width"></i>電話號碼:</label>
                                                    </th>
                                                    <td>
                                                        <label>@(string.IsNullOrEmpty(item.Phone) ? '-' : item.Phone)</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label><i class="fas fa-envelope icon-width"></i>Email:</label>
                                                    </th>
                                                    <td>
                                                        <label>@(string.IsNullOrEmpty(item.Email) ? '-' : item.Email)</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label><i class="fas fa-home icon-width"></i>地址:</label>
                                                    </th>
                                                    <td>
                                                        <label>@(string.IsNullOrEmpty(item.Address) ? '-' : item.Address)</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="form-group alert alert-light alert-form-div" role="alert">
                                            <table style="width:100%;">
                                                <tr>
                                                    <th>
                                                        <label><i class="fab fa-line fa-lg icon-width"></i>Line暱稱:</label>
                                                    </th>
                                                    <td>
                                                        <label>@(string.IsNullOrEmpty(item.Line) ? '-' : item.Line)</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label>綁定狀態:</label>
                                                    </th>
                                                    <td>
                                                        <label>@(string.IsNullOrEmpty(item.LineUserId) ? "未綁定" : "已綁定")</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="form-group alert alert-light alert-form-div" role="alert">
                                            <table style="width:100%;">
                                                <tr>
                                                    <th>
                                                        <label>預約次數:</label>
                                                    </th>
                                                    <td>
                                                        <label>@item.OrderNum</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label>取消次數:</label>
                                                    </th>
                                                    <td>
                                                        <label>@item.CancelNum</label>
                                                    </td>
                                                </tr>


                                                @if (UserPoint.point > 0 && UserPoint.point <= 2)
                                                {
                                                    string textColor = "black"; // 默认颜色

                                                    // 根据评分级别设置文字颜色
                                                    switch (UserPointStr1)
                                                    {
                                                        case "冠軍":
                                                            textColor = "#008000"; // 深绿色
                                                            break;
                                                        case "優質":
                                                            textColor = "#0000FF"; // 蓝色
                                                            break;
                                                        case "普通":
                                                            textColor = "#FFA500"; // 橙色
                                                            break;
                                                        case "不良":
                                                            textColor = "#FF0000"; // 红色
                                                            break;
                                                        case "差勁":
                                                            textColor = "#8A2BE2"; // 蓝紫色
                                                            break;
                                                        case "惡意":
                                                            textColor = "#FF1493"; // 深粉红色
                                                            break;
                                                    }

                                                    <tr>
                                                        <th style="color: @textColor;"><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                        <td style="color: @textColor;">@UserPointStr1 (@UserPointStr2)</td>
                                                    </tr>
                                                }
                                                else
                                                {
                                                    <tr>
                                                        <th><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                        <td>尚無評分</td>
                                                    </tr>
                                                }
                                            </table>
                                        </div>
                                        <div class="form-group alert alert-light alert-form-div" role="alert">
                                            <table style="width:100%;">
                                                <tr>
                                                    <th>備註:</th>
                                                    <td class="wrap-text">@item.Remark</td>
                                                </tr>
                                            </table>
                                        </div>

                                    </div>
                                    <div class="card-footer  d-flex justify-content-between" style="height: 60px;">
                                        <div>
                                            <a class="btn btn-primary" asp-page="UserEdit_m" asp-route-id="@item.Id">
                                                <i class="fas fa-user-edit icon-width"></i>編輯
                                            </a>
                                        </div>
                                        <form id="deluser" method="post" onclick="return promptPassword()" class="ml-auto">
                                            <input type="hidden" name="userId" value="@item.Id" />
                                            <button type="submit" class="btn btn-danger">
                                                <i class="fas fa-user-slash icon-width"></i>刪除
                                            </button>
                                        </form>

                                    </div>
                                    <div class="search-content" style="display:none;">
                                        <span>@item.Name?.ToLower()</span>
                                        <span>@item.Id?.ToLower()</span>
                                        <span>@item.Address?.ToLower()</span>
                                        <span>@item.Line?.ToLower()</span>
                                        <span>@item.Email?.ToLower()</span>
                                        <span>@item.Phone?.ToLower()</span>
                                        <span>@item.Remark?.ToLower()</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>


                <!-- 容器 2 -->
                <div id="users1Content" class="col-md-12 content" style="display: none;">
                    @foreach (var Ranktb in Model.UserRandTB)
                    {
                        if (Ranktb.Rank == "A")
                        {
                            var item = Model.Users.FirstOrDefault(up => up.Id.ToString() == Ranktb.uid);
                            int rank = Model.UserRandTB.IndexOf(Ranktb) + 1;

                            <div class="col-md-12 mb-4 card-item" data-search="@item.Name?.ToLower()">
                                <div class="card bg-success" data-cardname="@item.Name?.ToLower()">
                                    <div class="card-header" data-toggle="collapse" data-target="#collapse-@item.Id">
                                        <h5 class="card-title">
                                            <span class="rank">第 @rank 名</span>
                                            @{
                                                string imageData = item.Photo != null ? Convert.ToBase64String(item.Photo) : null;
                                            }
                                            @if (string.IsNullOrEmpty(imageData))
                                            {
                                                <img class="user-img imagePreview_img" src="dist/img/user3-128x128.jpg" alt="圖片">
                                            }
                                            else
                                            {
                                                <img class="user-img imagePreview_img" src="data:image/jpeg;base64,@imageData" alt="圖片">
                                            }

                                            @if (item.UserType == "1")
                                            {
                                                <i class="fas fa-user-tie text-primary"></i>
                                            }
                                            else if (item.UserType == "2")
                                            {
                                                <i class="fas fa-user-shield text-success"></i>
                                            }
                                            else if (item.UserType == "3")
                                            {
                                                <i class="fas fa-user text-danger"></i>
                                            }
                                            <a> @item.Name ( @item.Id ) </a>
                                        </h5>
                                    </div>
                                    <div id="collapse-@item.Id" class="collapse">
                                        <div class="card-body">
                                            @{
                                                var UserPoint = Model.UserPointTB.FirstOrDefault(up => up.uid.ToString() == item.Id);
                                                string UserPointStr1 = "無評分";
                                                string UserPointStr2 = "無評分";
                                                foreach (Web0524.Models.UserPointStr userPointStr in Model.userPointStr)
                                                {
                                                    if (UserPoint.point >= userPointStr.Rate_s && UserPoint.point < userPointStr.Rate_e)
                                                    {
                                                        UserPointStr1 = userPointStr.Str1;
                                                        UserPointStr2 = userPointStr.Str2;
                                                    }
                                                }
                                            }

                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label>帳戶權限:</label>
                                                        </th>
                                                        <td>
                                                            @if (item.UserType == "1")
                                                            {
                                                                <label><i class="fas fa-user-tie text-primary icon-width"></i>最高權限</label>
                                                            }
                                                            else if (item.UserType == "2")
                                                            {
                                                                <label><i class="fas fa-user-shield text-success icon-width"></i>管理員</label>
                                                            }
                                                            else if (item.UserType == "3")
                                                            {
                                                                <label><i class="fas fa-user text-danger icon-width"></i>一般會員</label>
                                                            }
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-phone icon-width"></i>電話號碼:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Phone) ? '-' : item.Phone)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-envelope icon-width"></i>Email:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Email) ? '-' : item.Email)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-home icon-width"></i>地址:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Address) ? '-' : item.Address)</label>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label><i class="fab fa-line fa-lg icon-width"></i>Line暱稱:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Line) ? '-' : item.Line)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>綁定狀態:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.LineUserId) ? "未綁定" : "已綁定")</label>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label>預約次數:</label>
                                                        </th>
                                                        <td>
                                                            <label>@item.OrderNum</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>取消次數:</label>
                                                        </th>
                                                        <td>
                                                            <label>@item.CancelNum</label>
                                                        </td>
                                                    </tr>


                                                    @if (UserPoint.point > 0 && UserPoint.point <= 2)
                                                    {
                                                        string textColor = "black"; // 默认颜色

                                                        // 根据评分级别设置文字颜色
                                                        switch (UserPointStr1)
                                                        {
                                                            case "冠軍":
                                                                textColor = "#008000"; // 深绿色
                                                                break;
                                                            case "優質":
                                                                textColor = "#0000FF"; // 蓝色
                                                                break;
                                                            case "普通":
                                                                textColor = "#FFA500"; // 橙色
                                                                break;
                                                            case "不良":
                                                                textColor = "#FF0000"; // 红色
                                                                break;
                                                            case "差勁":
                                                                textColor = "#8A2BE2"; // 蓝紫色
                                                                break;
                                                            case "惡意":
                                                                textColor = "#FF1493"; // 深粉红色
                                                                break;
                                                        }

                                                        <tr>
                                                            <th style="color: @textColor;"><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                            <td style="color: @textColor;">@UserPointStr1 (@UserPointStr2)</td>
                                                        </tr>
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <th><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                            <td>尚無評分</td>
                                                        </tr>
                                                    }
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>備註:</th>
                                                        <td>@item.Remark</td>
                                                    </tr>
                                                </table>
                                            </div>

                                        </div>
                                        <div class="card-footer  d-flex justify-content-between" style="height: 60px;">
                                            <div>
                                                <a class="btn btn-primary" asp-page="UserEdit_m" asp-route-id="@item.Id">
                                                    <i class="fas fa-user-edit icon-width"></i>編輯
                                                </a>
                                            </div>
                                            <form id="deluser" method="post" onclick="return promptPassword()" class="ml-auto">
                                                <input type="hidden" name="userId" value="@item.Id" />
                                                <button type="submit" class="btn btn-danger">
                                                    <i class="fas fa-user-slash icon-width"></i>刪除
                                                </button>
                                            </form>

                                        </div>
                                        <div class="search-content" style="display:none;">
                                            <span>@item.Name?.ToLower()</span>
                                            <span>@item.Id?.ToLower()</span>
                                            <span>@item.Address?.ToLower()</span>
                                            <span>@item.Line?.ToLower()</span>
                                            <span>@item.Email?.ToLower()</span>
                                            <span>@item.Phone?.ToLower()</span>
                                            <span>@item.Remark?.ToLower()</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                    }
                </div>


                <!-- 容器 3 -->
                <div id="users2Content" class="col-md-12 content" style="display: none;">
                    @for (int i = Model.UserRandTB.Count - 1; i >= 0; i--)
                    {
                        var Ranktb = Model.UserRandTB[i];
                        if (Ranktb.Rank == "C")
                        {
                            var item = Model.Users.FirstOrDefault(up => up.Id.ToString() == Ranktb.uid);

                            <div class="col-md-12 mb-4 card-item" data-search="@item.Name?.ToLower()">
                                <div class="card bg-danger" data-cardname="@item.Name?.ToLower()">
                                    <div class="card-header" data-toggle="collapse" data-target="#collapse-@item.Id">
                                        <h5 class="card-title">
                                            @{
                                                string imageData = item.Photo != null ? Convert.ToBase64String(item.Photo) : null;
                                            }
                                            @if (string.IsNullOrEmpty(imageData))
                                            {
                                                <img class="user-img imagePreview_img" src="dist/img/user3-128x128.jpg" alt="圖片">
                                            }
                                            else
                                            {
                                                <img class="user-img imagePreview_img" src="data:image/jpeg;base64,@imageData" alt="圖片">
                                            }

                                            @if (item.UserType == "1")
                                            {
                                                <i class="fas fa-user-tie text-primary"></i>
                                            }
                                            else if (item.UserType == "2")
                                            {
                                                <i class="fas fa-user-shield text-success"></i>
                                            }
                                            else if (item.UserType == "3")
                                            {
                                                <i class="fas fa-user text-danger"></i>
                                            }
                                            <a> @item.Name ( @item.Id ) </a>
                                        </h5>
                                    </div>
                                    <div id="collapse-@item.Id" class="collapse">
                                        <div class="card-body">
                                            @{
                                                var UserPoint = Model.UserPointTB.FirstOrDefault(up => up.uid.ToString() == item.Id);
                                                string UserPointStr1 = "無評分";
                                                string UserPointStr2 = "無評分";
                                                foreach (Web0524.Models.UserPointStr userPointStr in Model.userPointStr)
                                                {
                                                    if (UserPoint.point >= userPointStr.Rate_s && UserPoint.point < userPointStr.Rate_e)
                                                    {
                                                        UserPointStr1 = userPointStr.Str1;
                                                        UserPointStr2 = userPointStr.Str2;
                                                    }
                                                }
                                            }

                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label>帳戶權限:</label>
                                                        </th>
                                                        <td>
                                                            @if (item.UserType == "1")
                                                            {
                                                                <label><i class="fas fa-user-tie text-primary icon-width"></i>最高權限</label>
                                                            }
                                                            else if (item.UserType == "2")
                                                            {
                                                                <label><i class="fas fa-user-shield text-success icon-width"></i>管理員</label>
                                                            }
                                                            else if (item.UserType == "3")
                                                            {
                                                                <label><i class="fas fa-user text-danger icon-width"></i>一般會員</label>
                                                            }
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-phone icon-width"></i>電話號碼:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Phone) ? '-' : item.Phone)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-envelope icon-width"></i>Email:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Email) ? '-' : item.Email)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label><i class="fas fa-home icon-width"></i>地址:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Address) ? '-' : item.Address)</label>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label><i class="fab fa-line fa-lg icon-width"></i>Line暱稱:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.Line) ? '-' : item.Line)</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>綁定狀態:</label>
                                                        </th>
                                                        <td>
                                                            <label>@(string.IsNullOrEmpty(item.LineUserId) ? "未綁定" : "已綁定")</label>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>
                                                            <label>預約次數:</label>
                                                        </th>
                                                        <td>
                                                            <label>@item.OrderNum</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>取消次數:</label>
                                                        </th>
                                                        <td>
                                                            <label>@item.CancelNum</label>
                                                        </td>
                                                    </tr>


                                                    @if (UserPoint.point > 0 && UserPoint.point <= 2)
                                                    {
                                                        string textColor = "black"; // 默认颜色

                                                        // 根据评分级别设置文字颜色
                                                        switch (UserPointStr1)
                                                        {
                                                            case "冠軍":
                                                                textColor = "#008000"; // 深绿色
                                                                break;
                                                            case "優質":
                                                                textColor = "#0000FF"; // 蓝色
                                                                break;
                                                            case "普通":
                                                                textColor = "#FFA500"; // 橙色
                                                                break;
                                                            case "不良":
                                                                textColor = "#FF0000"; // 红色
                                                                break;
                                                            case "差勁":
                                                                textColor = "#8A2BE2"; // 蓝紫色
                                                                break;
                                                            case "惡意":
                                                                textColor = "#FF1493"; // 深粉红色
                                                                break;
                                                        }

                                                        <tr>
                                                            <th style="color: @textColor;"><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                            <td style="color: @textColor;">@UserPointStr1 (@UserPointStr2)</td>
                                                        </tr>
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <th><i class="fas fa-star icon-width"></i>會員級別:</th>
                                                            <td>尚無評分</td>
                                                        </tr>
                                                    }
                                                </table>
                                            </div>
                                            <div class="form-group alert alert-light alert-form-div" role="alert">
                                                <table style="width:100%;">
                                                    <tr>
                                                        <th>備註:</th>
                                                        <td>@item.Remark</td>
                                                    </tr>
                                                </table>
                                            </div>

                                        </div>
                                        <div class="card-footer  d-flex justify-content-between" style="height: 60px;">
                                            <div>
                                                <a class="btn btn-primary" asp-page="UserEdit_m" asp-route-id="@item.Id">
                                                    <i class="fas fa-user-edit icon-width"></i>編輯
                                                </a>
                                            </div>
                                            <form id="deluser" method="post" onclick="return promptPassword()" class="ml-auto">
                                                <input type="hidden" name="userId" value="@item.Id" />
                                                <button type="submit" class="btn btn-danger">
                                                    <i class="fas fa-user-slash icon-width"></i>刪除
                                                </button>
                                            </form>

                                        </div>
                                        <div class="search-content" style="display:none;">
                                            <span>@item.Name?.ToLower()</span>
                                            <span>@item.Id?.ToLower()</span>
                                            <span>@item.Address?.ToLower()</span>
                                            <span>@item.Line?.ToLower()</span>
                                            <span>@item.Email?.ToLower()</span>
                                            <span>@item.Phone?.ToLower()</span>
                                            <span>@item.Remark?.ToLower()</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        
                    }
                </div>


            </div>
        </div>
    </div>
        @section Scripts {
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script>
                $(document).ready(function () {
                    $("#allusersTab").click(function () {
                        $("#allusersContent").show();
                        $("#users1Content").hide();
                        $("#users2Content").hide();
                    });

                    $("#users1Tab").click(function () {
                        $("#allusersContent").hide();
                        $("#users1Content").show();
                        $("#users2Content").hide();
                    });

                    $("#users2Tab").click(function () {
                        $("#allusersContent").hide();
                        $("#users2Content").show();
                        $("#users1Content").hide();
                    });
                });
            </script>
        }
</body>
</html>



